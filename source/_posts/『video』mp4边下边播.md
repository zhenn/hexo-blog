title: "『video』mp4边下边播"
date: 2016-04-07 10:52:41
categories: 技术
tags: ['video','javascript']
---

使用H5 video播放器播放mp4视频，遇到一个奇怪的现象，部分mp4视频需要下载完整才能播放，有些则可以边下载边播放。

开始怀疑是video播放器问题或配置有误，查看文档并未找到有帮助信息。后来在同事提醒下，发现视频元数据 (编码等级、分辨率、色域、码率、帧率、位深、时长等等)写在文件末尾，播放器播放时需要读取时长就需要下载整个视频才能读到。一般元数据写在 文件头 部 ，有些转码器可能会写文件尾部， 如FFmpeg将视频转换成MP4。

要解决这个问题很简单，可用`qt-faststart`重新码。

<!--more-->

